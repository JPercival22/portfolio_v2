const openLightbox=(e,t,o)=>{if(window.innerWidth>=768){const r=o.querySelector("img");r.src=e,r.alt=t,o.style.display="block",document.addEventListener("click",handleDocumentClick)}},handleDocumentClick=e=>{const t=e.target.closest('.lightbox [data-action="close-lightbox"]');if(t){const e=t.closest(".lightbox");e&&closeLightbox(e)}},closeLightbox=e=>{e.style.display="none",document.removeEventListener("click",handleDocumentClick)},initLightboxFunctionality=()=>{if(window.innerWidth<767){return void document.querySelectorAll(".lightbox").forEach((e=>e.style.display="none"))}document.querySelectorAll(".gallery[data-index]").forEach((e=>{try{const t=e.querySelector("img"),o=e.getAttribute("data-index"),r=document.querySelector(`.lightbox.lightbox_${o}`),n=e.querySelector("figcaption");if(t&&r){const handleOpenLightbox=()=>openLightbox(t.src,t.alt,r);t.addEventListener("click",handleOpenLightbox),n&&n.addEventListener("click",handleOpenLightbox),r.addEventListener("click",(e=>{(e.target===r||e.target===t||e.target.closest(".close-btn"))&&closeLightbox(r)})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&"block"===r.style.display&&closeLightbox(r)}))}else console.error(`Image or Lightbox element not found for figure with data-index ${o}`)}catch(e){console.error("Error processing figure:",e)}}))};export{openLightbox,closeLightbox,initLightboxFunctionality};