const openLightbox=(imageSrc,imageAlt,lightbox)=>{if(window.innerWidth>=768){const lightboxImage=lightbox.querySelector("img");lightboxImage.src=imageSrc,lightboxImage.alt=imageAlt,lightbox.style.display="block",document.addEventListener("click",handleDocumentClick)}},handleDocumentClick=event=>{const closeBtn=event.target.closest('.lightbox [data-action="close-lightbox"]');if(closeBtn){const lightbox=closeBtn.closest(".lightbox");lightbox&&closeLightbox(lightbox)}},closeLightbox=lightbox=>{lightbox.style.display="none",document.removeEventListener("click",handleDocumentClick)},initLightboxFunctionality=()=>{if(window.innerWidth<767){return void document.querySelectorAll(".lightbox").forEach((lightbox=>lightbox.style.display="none"))}document.querySelectorAll(".gallery[data-index]").forEach((figure=>{try{const image=figure.querySelector("img"),lightboxIndex=figure.getAttribute("data-index"),lightbox=document.querySelector(`.lightbox.lightbox_${lightboxIndex}`),figcaption=figure.querySelector("figcaption");if(image&&lightbox){const handleOpenLightbox=()=>openLightbox(image.src,image.alt,lightbox);image.addEventListener("click",handleOpenLightbox),figcaption&&figcaption.addEventListener("click",handleOpenLightbox),lightbox.addEventListener("click",(event=>{(event.target===lightbox||event.target===image||event.target.closest(".close-btn"))&&closeLightbox(lightbox)})),document.addEventListener("keydown",(event=>{"Escape"===event.key&&"block"===lightbox.style.display&&closeLightbox(lightbox)}))}else console.error(`Image or Lightbox element not found for figure with data-index ${lightboxIndex}`)}catch(error){console.error("Error processing figure:",error)}}))};export{openLightbox,closeLightbox,initLightboxFunctionality};